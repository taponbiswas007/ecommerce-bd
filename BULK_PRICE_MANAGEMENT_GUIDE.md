# Advanced Bulk Price Management System

## Overview

‡¶è‡¶á ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶≤ product ‡¶è‡¶∞ price management ‡¶∏‡¶π‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá AI assistance ‡¶∏‡¶π‡•§

## Features Added

### 1. **Multiple Price Field Management**

- **Base Price**: ‡¶Æ‡ßÇ‡¶≤ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
- **Discount Price**: ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
- ‡¶¶‡ßÅ‡¶ü‡¶ø price field ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ‡¶≠‡¶æ‡¶¨‡ßá manage ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®

### 2. **Price Update Methods (Fixed Issue)**

#### Fixed Price

- ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶∏‡¶ï‡¶≤ selected products ‡¶è

#### Percentage Change (‚úÖ Fixed - Increase & Decrease Both Work Now)

- **Increase**: ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® percentage ‡¶è
- **Decrease**: ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶ï‡¶Æ‡¶æ‡¶® percentage ‡¶è
- ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: 10% increase ‡¶¨‡¶æ 15% decrease

#### Add/Subtract Amount

- **Add (+)**: ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü amount ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
- **Subtract (-)**: ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü amount ‡¶¨‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
- ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡ß≥50 ‡¶Ø‡ßã‡¶ó ‡¶¨‡¶æ ‡ß≥100 ‡¶¨‡¶ø‡¶Ø‡¶º‡ßã‡¶ó

### 3. **Discount Management**

‡¶§‡¶ø‡¶®‡¶ü‡¶ø discount type:

- **Percentage Off**: Base price ‡¶•‡ßá‡¶ï‡ßá percentage discount
- **Fixed Discount**: Base price ‡¶•‡ßá‡¶ï‡ßá fixed amount ‡¶ï‡¶Æ‡¶æ‡¶®
- **Absolute Price**: ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø discount price set ‡¶ï‡¶∞‡ßÅ‡¶®

‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø:

- Bulk discount apply ‡¶ï‡¶∞‡ßÅ‡¶®
- Bulk discount remove ‡¶ï‡¶∞‡ßÅ‡¶®
- Auto validation (discount price < base price)

### 4. **Quantity-wise Tier Pricing**

Bulk order ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø different prices:

**Example:**

- 1-10 units: ‡ß≥100 each
- 11-50 units: ‡ß≥90 each
- 51+ units: ‡ß≥80 each

**Features:**

- Multiple tiers add ‡¶ï‡¶∞‡ßÅ‡¶®
- Bulk products ‡¶è apply ‡¶ï‡¶∞‡ßÅ‡¶®
- Preview tier structure
- Remove/clear tiers

### 5. **AI Assistant Features** ü§ñ

#### AI Price Suggestions

- Selected products ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø optimal pricing strategy
- Market trends analysis
- Profit margin considerations

#### AI Price Optimization

- Performance data based optimization
- Conversion rate analysis
- Stock level considerations
- Sales velocity analysis

#### AI Market Analysis

- Competitive pricing analysis
- Market positioning suggestions
- Bangladesh market specific recommendations

### 6. **Enhanced Filters**

- Search by name/SKU
- Filter by category
- Price range filter
- Status filter (active/inactive)
- **NEW**: Discount status filter (with/without discount)

### 7. **Live Preview**

- Real-time price change preview
- Visual comparison (old ‚Üî new price)
- Color-coded changes:
    - üü¢ Green: Price increase
    - üî¥ Red: Price decrease
    - ‚ö™ Gray: No change

### 8. **Export Functionality**

- Export current filtered products
- CSV format
- Includes:
    - Basic info (ID, Name, SKU, Category)
    - All prices (base, discount, tiers)
    - Ready for Excel/Google Sheets

## How to Use

### Basic Price Update

1. Select products (checkbox)
2. Choose "Basic Pricing" tab
3. Select price field (base_price or discount_price)
4. Choose update method:
    - Fixed: Enter new price
    - Percentage: Select increase/decrease & enter %
    - Amount: Select add/subtract & enter amount
5. Click "Preview Changes" to see
6. Click "Update Selected Products"

### Apply Discounts

1. Select products
2. Go to "Discount Pricing" tab
3. Choose discount type
4. Enter discount value
5. Click "Apply Discount to Selected"

### Add Tier Pricing

1. Select products
2. Go to "Tier Pricing" tab
3. Add tiers:
    - Min quantity (e.g., 10)
    - Max quantity (e.g., 50 or leave blank for ‚àû)
    - Price per unit
4. Click "Add Tier"
5. Repeat for multiple tiers
6. Click "Apply Tiers to Selected"

### Use AI Assistant

1. Select products ‡¶Ü‡¶™‡¶®‡¶ø analyze ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®
2. Click one of:
    - "Get AI Suggestions": General pricing advice
    - "Optimize Prices": Performance-based optimization
    - "Market Analysis": Competitive analysis
3. AI suggestion box ‡¶è result ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®

### Export Prices

1. Apply filters ‡¶Ø‡¶¶‡¶ø ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶π‡¶Ø‡¶º
2. Click "Export Prices" button
3. CSV file download ‡¶π‡¶¨‡ßá

## Technical Details

### Updated Files

1. **Blade View**: `resources/views/admin/products/bulk-price-update.blade.php`
    - Enhanced UI with tabs
    - AI assistant integration
    - Live preview system
    - Better filters

2. **Controller**: `app/Http/Controllers/Admin/BulkProductPriceController.php`
    - Fixed percentage decrease bug
    - Added price_field parameter
    - New methods:
        - `applyDiscount()`
        - `removeDiscount()`
        - `applyTiers()`
        - `aiSuggest()`
        - `aiOptimize()`
        - `aiMarket()`
        - `exportPrices()`

3. **Routes**: `routes/web.php`
    - Added 8 new routes
    - All under `admin.bulk-price.*` namespace

### Bug Fixes

‚úÖ **Fixed: Percentage Decrease Not Working**

- Added `percentage_direction` parameter
- Separate handling for increase/decrease
- Formula:
    - Increase: `price * (1 + percentage/100)`
    - Decrease: `price * (1 - percentage/100)`

### New Database Interactions

- Updates `base_price` or `discount_price`
- Creates/updates `product_prices` table (tier pricing)
- Auto-validation for discount < base price

### AI Integration

- Uses existing `AIService` class
- Supports both Gemini and Groq
- Configurable in `config/ai.php`
- Prompts tailored for pricing analysis

## Requirements

### For AI Features

‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ `.env` file ‡¶è ‡¶è‡¶ï‡¶ü‡¶ø AI provider configure ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá:

```env
# Option 1: Gemini (Recommended)
AI_DEFAULT_PROVIDER=gemini
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-2.5-flash

# Option 2: Groq
AI_DEFAULT_PROVIDER=groq
GROQ_API_KEY=your_groq_api_key_here
GROQ_MODEL=llama-3.3-70b-versatile
```

### For Export

- Ensure `storage/app/exports` directory is writable
- Auto-created if not exists

## Benefits

### Time Saving

- ‚è±Ô∏è Bulk update ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞‡ßã products ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá
- üéØ Filter ‡¶ï‡¶∞‡ßá specific products select ‡¶ï‡¶∞‡ßÅ‡¶®
- üëÅÔ∏è Preview before final update

### Accuracy

- ‚úÖ Real-time calculation
- ‚úÖ Visual comparison
- ‚úÖ Auto-validation rules
- ‚úÖ No manual calculation errors

### Smart Pricing

- ü§ñ AI-powered suggestions
- üìä Data-driven decisions
- üí∞ Optimize profit margins
- üèÜ Stay competitive

### Business Intelligence

- üìà Market analysis
- üéØ Performance-based optimization
- üí° Strategic pricing recommendations

## Advanced Usage

### Combining Features

1. **AI + Bulk Update:**
    - Get AI suggestions first
    - Review recommendations
    - Apply to products using bulk update

2. **Discount + Tier Pricing:**
    - Set discount_price for retail
    - Add tier pricing for wholesale
    - Automatic best price selection for customers

3. **Filter + Export:**
    - Apply complex filters
    - Export for external analysis
    - Reimport after review

### Best Practices

1. Always preview changes before applying
2. Use AI suggestions for new categories
3. Regular market analysis (monthly)
4. Export backup before major updates
5. Start with small batches for testing

## Troubleshooting

### AI Features Not Working

- Check `.env` for API keys
- Verify AI service is enabled in config
- Check logs: `storage/logs/laravel.log`

### Tier Pricing Not Showing

- Ensure products have tier prices set
- Check `product_prices` table
- Verify relationship in Product model

### Export Failing

- Check storage permissions
- Ensure enough disk space
- Verify export directory exists

## Support

‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º ‡¶¨‡¶æ additional features ‡¶ö‡¶æ‡¶®:

- Check error logs
- Review documentation
- Test with small dataset first

---

**Version:** 2.0  
**Last Updated:** March 2026  
**Status:** ‚úÖ Production Ready
